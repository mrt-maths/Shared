<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Shared</title>
<style>
  body{font-family:system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:0;padding:32px;background:#f5f7fb}
  h1{margin:0 0 10px}
  p{margin:0 0 18px;opacity:.75}
  .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
  a.card{display:block;text-decoration:none;color:#111;background:#fff;border:1px solid #ddd;border-radius:14px;padding:16px;transition:.15s}
  a.card:hover{transform:translateY(-3px);box-shadow:0 10px 18px rgba(0,0,0,.08)}
  .title{font-weight:700;font-size:18px;margin-bottom:6px}
  .desc{font-size:13px;opacity:.75;line-height:1.3}
  .error{background:#fff3f3;border:1px solid #ffd0d0;border-radius:12px;padding:12px}
</style>
</head>
<body>
  <h1>Shared</h1>
  <p>Auto-generated from the repo folder.</p>
  <div id="status"></div>
  <div class="grid" id="games"></div>

<script>
/* ====== EDIT THESE ====== */
const OWNER  = "mrt-maths";
const REPO   = "Shared";
const BRANCH = "main";
/* If your games are in a subfolder, set PATH = "games" etc. If they are in repo root, leave "" */
const PATH   = ""; // e.g. "" or "games"
/* ======================== */

const statusEl = document.getElementById("status");
const gridEl = document.getElementById("games");

function prettify(name){
  return name
    .replace(/\.html$/i,"")
    .replace(/[-_]+/g," ")
    .replace(/\b\w/g, c => c.toUpperCase());
}

async function load() {
  try {
    const api = `https://api.github.com/repos/${OWNER}/${REPO}/contents/${PATH}?ref=${encodeURIComponent(BRANCH)}`;
    const res = await fetch(api, { headers: { "Accept": "application/vnd.github+json" }});
    if (!res.ok) throw new Error(`GitHub API error ${res.status}. Is the repo public? Is OWNER/REPO correct?`);
    const items = await res.json();

    const htmlFiles = items
      .filter(x => x.type === "file" && /\.html$/i.test(x.name))
      .map(x => x.name)
      .filter(n => n.toLowerCase() !== "index.html")
      .sort((a,b) => a.localeCompare(b));

    if (htmlFiles.length === 0){
      statusEl.innerHTML = `<div class="error">No other .html files found in this folder.</div>`;
      return;
    }

    // Build base path for links on GitHub Pages
    // (Links should be relative to index.html location)
    const base = PATH ? (PATH.replace(/\/+$/,"") + "/") : "";

    gridEl.innerHTML = htmlFiles.map(f => `
      <a class="card" href="${base}${encodeURI(f)}">
        <div class="title">${prettify(f)}</div>
        <div class="desc">${base}${f}</div>
      </a>
    `).join("");

  } catch (err) {
    statusEl.innerHTML = `<div class="error"><b>Couldnâ€™t load game list.</b><br>${err.message}</div>`;
  }
}

load();
</script>
</body>
</html>
